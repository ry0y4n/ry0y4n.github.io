{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{348:function(s,n,a){\"use strict\";a.r(n);var e=a(3),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"p\",[s._v(\"前回ではReduxで状態管理を設定し，Firebaseと接続，firestoreデータベースとの同期まで漕ぎ着けた．\")]),s._v(\" \"),a(\"p\",[s._v(\"今回は\"),a(\"code\",[s._v(\"Firebase Authentication\")]),s._v(\"を使ってログイン機能を実装していきたい．\")]),s._v(\" \"),a(\"p\",[a(\"RouterLink\",{attrs:{to:\"/views/プログラミング/2020/010601.html\"}},[s._v(\"React + Redux + Firebase を使ってログイン機能あり掲示板アプリ開発①\")])],1),s._v(\" \"),a(\"p\",[a(\"RouterLink\",{attrs:{to:\"/views/プログラミング/2020/010701.html\"}},[s._v(\"React + Redux + Firebase を使ってログイン機能あり掲示板アプリ開発②\")])],1),s._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"\"}},[s._v(\"React + Redux + Firebase を使ってログイン機能あり掲示板アプリ開発③\")]),s._v(\"　←今ここ！！！\")]),s._v(\" \"),a(\"p\",[a(\"RouterLink\",{attrs:{to:\"/views/プログラミング/2020/010901.html\"}},[s._v(\"React + Redux + Firebase を使ってログイン機能あり掲示板アプリ開発④\")])],1),s._v(\" \"),a(\"h2\",{attrs:{id:\"firebase-authenticationイントロ\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#firebase-authenticationイントロ\"}},[s._v(\"#\")]),s._v(\" Firebase Authenticationイントロ\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"Firebase Authentication\")]),s._v(\"は認証機能を司る機能で\"),a(\"code\",[s._v(\"Firestore\")]),s._v(\"などと連動することが可能．\")]),s._v(\" \"),a(\"p\",[s._v(\"また一種のデータベースのような振る舞いもする．ユーザーが登録した時にユーザー情報を保管する．firestoreデータベースにではなく．\")]),s._v(\" \"),a(\"p\",[s._v(\"例えばメールアドレスやユーザーID（Authenticationによる自動生成）などが保管できる．しかし自由度は低く，名前や，パスワードなどのカスタムプロパティは保存できない．\")]),s._v(\" \"),a(\"p\",[s._v(\"なのでそれらカスタムプロパティは\"),a(\"code\",[s._v(\"firestore\")]),s._v(\"に\"),a(\"code\",[s._v(\"Users\")]),s._v(\"コレクションを作成し，そこに保存することにする．\\nそこにAuthenticationで作成したIDでもってデータを保管すればAuthentication内のデータとの結びつけもできることになる．\\n\"),a(\"img\",{attrs:{width:\"1361\",alt:\"スクリーンショット 2019-10-26 14.08.45.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/c9406b3f-9d44-77b0-bb9e-3313624eec4c.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"まずはFirebase Authenticationを利用可能にしてみよう．\\nfirebaseのダッシュボードから\"),a(\"code\",[s._v(\"Authentication\")]),s._v(\"ページに行って，\"),a(\"code\",[s._v(\"ログイン方法を設定\")]),s._v(\"をクリック，\")]),s._v(\" \"),a(\"p\",[s._v(\"FacebookやTwitterなどたくさんのログインメソッドが出てくる．今回は単純に\"),a(\"code\",[s._v(\"メール/パスワード\")]),s._v(\"を有効にする．（メールリンクは無効のままで）\")]),s._v(\" \"),a(\"p\",[s._v(\"ユーザータブにとんで，テストユーザーを作ってみよう．\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 14.17.18.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/6263c728-708f-5c18-5ef3-0900b9cac2c6.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"こいつはまだ追加の情報を持ってないし，firestoreで連携していない．\\n最終的には\"),a(\"code\",[s._v(\"Users\")]),s._v(\"コレクションを作って，ユーザと連携するようにしたい．\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"reduxとfirebase-authの接続\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#reduxとfirebase-authの接続\"}},[s._v(\"#\")]),s._v(\" ReduxとFirebase Authの接続\")]),s._v(\" \"),a(\"p\",[s._v(\"Firebase Authの設定が完了したので次はアプリ内で使えるようにしたい．具体的にはユーザーのAuthenticationステータスを常に追っている状態にしたい．ログインしたのか，ログアウトしたのか．というようなステータスを．\")]),s._v(\" \"),a(\"p\",[s._v(\"そのためには\"),a(\"code\",[s._v(\"firebase\")]),s._v(\"から\"),a(\"code\",[s._v(\"Firebase Authentication\")]),s._v(\"のステータスを\"),a(\"code\",[s._v(\"redux\")]),s._v(\"のstoreに同期して\"),a(\"code\",[s._v(\"state\")]),s._v(\"からステータスを確認できるようにする必要がある．\")]),s._v(\" \"),a(\"p\",[s._v(\"前回，\"),a(\"code\",[s._v(\"firestoreReducer\")]),s._v(\"を使って，\"),a(\"code\",[s._v(\"firestore\")]),s._v(\"と\"),a(\"code\",[s._v(\"state\")]),s._v(\"を同期した．今回も似たようなことをすればいい．\")]),s._v(\" \"),a(\"p\",[s._v(\"ということで\"),a(\"code\",[s._v(\"rootReducer\")]),s._v(\"に\"),a(\"code\",[s._v(\"firebaseReducer\")]),s._v(\"を追加する．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-reducers/rootReducer.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import authReducer from './authReducer'\\nimport projectReducer from './projectReducer'\\nimport { combineReducers } from 'redux'\\nimport { firestoreReducer } from 'redux-firestore'\\nimport { firebaseReducer } from 'react-redux-firebase'\\n\\nconst rootReducer = combineReducers({\\n    auth: authReducer,\\n    project: projectReducer,\\n    firestore: firestoreReducer,\\n    firebase: firebaseReducer\\n})\\n\\nexport default rootReducer\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\")])]),a(\"p\",[a(\"code\",[s._v(\"firebaseReducer\")]),s._v(\"によってfirebaseの全てのステータスが\"),a(\"code\",[s._v(\"redux\")]),s._v(\"ひいては\"),a(\"code\",[s._v(\"state\")]),s._v(\"に同期される．stateの\"),a(\"code\",[s._v(\"firebase\")]),s._v(\"オブジェクトにね．\")]),s._v(\" \"),a(\"p\",[s._v(\"これでセットアップは完了した．では実際にコンポネントからAuthenticationステータスにアクセスしてみよう．\")]),s._v(\" \"),a(\"p\",[s._v(\"今回は\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"コンポネントでアクセスしていく．ここでは\"),a(\"code\",[s._v(\"SignedInLinks\")]),s._v(\"と\"),a(\"code\",[s._v(\"SignedOutLinks\")]),s._v(\"コンポネントが呼び出されているが，①で書いたように本来はログイン状況に応じて片方のみを表示したいのだ．\")]),s._v(\" \"),a(\"p\",[s._v(\"まずはコンポネントを\"),a(\"code\",[s._v(\"connect\")]),s._v(\"を使って\"),a(\"code\",[s._v(\"Redux\")]),s._v(\"を接続している．ここでは\"),a(\"code\",[s._v(\"firestore\")]),s._v(\"のデータはいらない．つまりHOCは1つなので\"),a(\"code\",[s._v(\"compose\")]),s._v(\"はいらない．\")]),s._v(\" \"),a(\"p\",[s._v(\"とりあえずどんな形式で\"),a(\"code\",[s._v(\"state\")]),s._v(\"に保存されているのか知るために\"),a(\"code\",[s._v(\"console.log(state)\")]),s._v(\"だけしてみる．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-layout/Navbar.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react'\\nimport { Link } from 'react-router-dom'\\nimport SignedInLinks from './SignedInLinks'\\nimport SignedOutLinks from './SignedOutLinks'\\nimport { connect } from 'react-redux'\\n\\nconst Navbar = () => {\\n    return (\\n        <nav className=\\\"nav-wrapper grey darken-3\\\">\\n            <div className=\\\"container\\\">\\n                <Link to='/' className=\\\"brand-logo\\\">MarioPlan</Link>\\n                <SignedInLinks />\\n                <SignedOutLinks />\\n            </div>\\n        </nav>\\n    )\\n}\\n\\nconst mapStateToProps = (state) => {\\n    console.log(state);\\n    return {\\n\\n    }\\n}\\n\\nexport default connect(mapStateToProps)(Navbar);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\")])]),a(\"p\",[s._v(\"実行してコンソールから確認してみると，\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 14.54.24.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/c8cea7b0-151e-f5ce-28c5-bb08c168c5c3.png\"}}),s._v(\" \"),a(\"code\",[s._v(\"firebase\")]),s._v(\"の\"),a(\"code\",[s._v(\"auth\")]),s._v(\"プロパティをみると\"),a(\"code\",[s._v(\"isEmpty\")]),s._v(\"が\"),a(\"code\",[s._v(\"true\")]),s._v(\"になっている．これはプロフィールが存在しないことを表している．つまりログインしていないことを表す．\")]),s._v(\" \"),a(\"p\",[s._v(\"次はログイン機能を実装していく．\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"ログイン機能\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ログイン機能\"}},[s._v(\"#\")]),s._v(\" ログイン機能\")]),s._v(\" \"),a(\"p\",[s._v(\"メールアドレスとパスワードを使ってログインするにはfirebaseプロジェクトとの非同期処理を行う必要がある．\")]),s._v(\" \"),a(\"p\",[s._v(\"それはどこでやればいいか．もうわかるよね．\"),a(\"code\",[s._v(\"action creator\")]),s._v(\"だ．\\nということでサインインに関するaction creatorを作成していく．\")]),s._v(\" \"),a(\"p\",[s._v(\"おさらいだけど\"),a(\"code\",[s._v(\"thunk\")]),s._v(\"のおかげで\"),a(\"code\",[s._v(\"dispatch\")]),s._v(\"を一旦止めて代わりに関数を返すことができたよね．そこで\"),a(\"code\",[s._v(\"dispatch\")]),s._v(\"やfirebaseに関するインスタンスを作る\"),a(\"code\",[s._v(\"getFirebase\")]),s._v(\"を受け取って非同期処理が行えた．\")]),s._v(\" \"),a(\"p\",[s._v(\"今回は\"),a(\"code\",[s._v(\"auth\")]),s._v(\"関数，そして\"),a(\"code\",[s._v(\"signInWithEmailAndPassword\")]),s._v(\"メソッドを使って引数に必要な情報を渡すことでログインできる．\")]),s._v(\" \"),a(\"p\",[s._v(\"そして\"),a(\"code\",[s._v(\"projectActions.js\")]),s._v(\"同様，非同期処理には幾分か時間がかかることを考慮して\"),a(\"code\",[s._v(\"then\")]),s._v(\"メソッドを使ってコールバック関数を呼び出し，その中で\"),a(\"code\",[s._v(\"action\")]),s._v(\"を\"),a(\"code\",[s._v(\"dispatch\")]),s._v(\"する．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-actions/authActions.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"export const signIn = (credentials) => {\\n    return (dispatch, getState, {getFirebase}) => {\\n        const firebase = getFirebase();\\n\\n        firebase.auth().signInWithEmailAndPassword(\\n            credentials.email,\\n            credentials.password\\n        ).then(() => {\\n            dispatch({ type: 'LOGIN_SUCCESS' });\\n        }).catch((err) => {\\n            dispatch({ type: 'LOGIN_ERROR' });\\n        });\\n    }\\n}\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\")])]),a(\"p\",[a(\"code\",[s._v(\"credentials\")]),s._v(\"にはメールアドレスやパスワードが含まれる．\")]),s._v(\" \"),a(\"p\",[s._v(\"次にこれらの\"),a(\"code\",[s._v(\"action\")]),s._v(\"を扱う\"),a(\"code\",[s._v(\"reducer\")]),s._v(\"を\"),a(\"code\",[s._v(\"authReducer.js\")]),s._v(\"で実装する．\")]),s._v(\" \"),a(\"p\",[s._v(\"ログインが成功したかどうかという指標として\"),a(\"code\",[s._v(\"authError\")]),s._v(\"というプロパティを与えた．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-reducers/authReducer.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"const initState = {\\n    authError: null\\n}\\nconst authReducer = (state = initState, action) => {\\n    switch(action.type) {\\n        case 'LOGIN_ERROR':\\n            console.log('login error');\\n            return {\\n                ...state,\\n                authError: 'Login failed'\\n            }\\n        case 'LOGIN_SUCCESS':\\n            console.log('login success');\\n            return {\\n                ...state,\\n                authError: null\\n            }\\n        default:\\n            return state;\\n    }\\n}\\n\\nexport default authReducer\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\")])]),a(\"p\",[s._v(\"注意として\"),a(\"code\",[s._v(\"rootReducer\")]),s._v(\"を見ればわかるがここでの\"),a(\"code\",[s._v(\"state\")]),s._v(\"はreduxストアの\"),a(\"code\",[s._v(\"state.auth\")]),s._v(\"に対応する．\"),a(\"code\",[s._v(\"state.firebase\")]),s._v(\"ではなくて．\")]),s._v(\" \"),a(\"p\",[s._v(\"あとは\"),a(\"code\",[s._v(\"SignIn\")]),s._v(\"コンポネントから\"),a(\"code\",[s._v(\"authActions\")]),s._v(\"アクションクリエータを\"),a(\"code\",[s._v(\"dispatch\")]),s._v(\"すればいい．\\nそのためには\"),a(\"code\",[s._v(\"authActions\")]),s._v(\"を孕んだ\"),a(\"code\",[s._v(\"disaptch\")]),s._v(\"を\"),a(\"code\",[s._v(\"props\")]),s._v(\"としてコンポネントに渡す．方法はもちろん\"),a(\"code\",[s._v(\"connnect\")]),s._v(\"．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-auth/SignIn.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('import React, { Component } from \\'react\\'\\nimport { connect } from \\'react-redux\\'\\nimport { signIn } from \\'../../store/actions/authActions\\'\\n\\nclass SignIn extends Component {\\n    state = {\\n        email: \\'\\',\\n        password: \\'\\'\\n    }\\n    handleChange = (e) => {\\n        this.setState({\\n            [e.target.id]: e.target.value\\n        })\\n    }\\n    handleSubmit = (e) => {\\n        e.preventDefault()\\n        this.props.signIn(this.state)\\n    }\\n    render() {\\n        const { authError } = this.props;\\n        return (\\n            <div className=\"container\">\\n                <form onSubmit={this.handleSubmit} className=\"white\">\\n                    <h5 className=\"grey-text text-darken-3\">Sign In</h5>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"email\">Email</label>\\n                        <input type=\"email\" id=\"email\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"password\">Password</label>\\n                        <input type=\"password\" id=\"password\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <button className=\"btn pink lighten-1 z-depth-0\">Login</button>\\n                        <div className=\"red-text center\">\\n                            { authError ? <p>{authError}</p> : null }\\n                        </div>\\n                    </div>\\n                </form>\\n            </div>\\n        )\\n    }\\n}\\n\\nconst mapStateToProps = (state) => {\\n    return {\\n        authError: state.auth.authError\\n    }\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        signIn: (creds) => dispatch(signIn(creds))\\n    }\\n}\\n\\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),a(\"br\")])]),a(\"p\",[s._v(\"エラーがあったとき用に\"),a(\"code\",[s._v(\"mapStateToProps\")]),s._v(\"で\"),a(\"code\",[s._v(\"authError\")]),s._v(\"を渡してフォーム下部でログイン失敗すると\"),a(\"code\",[s._v(\"authError\")]),s._v(\"が表示されるようにした．\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 15.58.44.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/7a0fc830-0753-8730-19ce-221812900a3c.png\"}}),s._v(\"\\nわざとログイン失敗して\"),a(\"code\",[s._v(\"authError\")]),s._v(\"が表示されるのも確認してみて欲しい．\")]),s._v(\" \"),a(\"p\",[s._v(\"次はログアウトを実装したいと思う．\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"ログアウト機能\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ログアウト機能\"}},[s._v(\"#\")]),s._v(\" ログアウト機能\")]),s._v(\" \"),a(\"p\",[s._v(\"ログアウト用のコンポネントは作ってなかったよね．\\n\"),a(\"code\",[s._v(\"SignedInkLinks\")]),s._v(\"の\"),a(\"code\",[s._v(\"Log Out\")]),s._v(\"をクリックすると即座にログアウトする．そんな設計だった．今はクリックしてもダッシュボードに飛ぶだけ．\")]),s._v(\" \"),a(\"p\",[s._v(\"ログアウトもログイン同様，非同期処理でもって遂行する．ということは実装するのはもちろん\"),a(\"code\",[s._v(\"action creator\")]),s._v(\"上だ．\")]),s._v(\" \"),a(\"p\",[s._v(\"ということで\"),a(\"code\",[s._v(\"authActions\")]),s._v(\"をいじってログアウト用の\"),a(\"code\",[s._v(\"action creator\")]),s._v(\"を書いていく．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-actions/authActions.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"export const signIn = (credentials) => {\\n    return (dispatch, getState, {getFirebase}) => {\\n        const firebase = getFirebase();\\n\\n        firebase.auth().signInWithEmailAndPassword(\\n            credentials.email,\\n            credentials.password\\n        ).then(() => {\\n            dispatch({ type: 'LOGIN_SUCCESS' });\\n        }).catch((err) => {\\n            dispatch({ type: 'LOGIN_ERROR' });\\n        });\\n    }\\n}\\n\\nexport const signOut = () => {\\n    return (dispatch, getState, {getFirebase}) => {\\n        const firebase = getFirebase();\\n\\n        firebase.auth().signOut().then(() => {\\n            dispatch({ type: 'SIGNOUT_SUCCESS' })\\n        });\\n    }\\n}\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\")])]),a(\"p\",[s._v(\"ログイン用のと同様に\"),a(\"code\",[s._v(\"firebase\")]),s._v(\"インスタンスを作ってログアウト用のメソッドを実行している．\\nそして非同期処理が完了次第，\"),a(\"code\",[s._v(\"action\")]),s._v(\"を\"),a(\"code\",[s._v(\"dispatch\")]),s._v(\"している．\")]),s._v(\" \"),a(\"p\",[s._v(\"次に，この\"),a(\"code\",[s._v(\"action\")]),s._v(\"を扱う\"),a(\"code\",[s._v(\"reducer\")]),s._v(\"を定義する．ここもログイン用と同じだな．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-reducers/authReducer.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"const initState = {\\n    authError: null\\n}\\nconst authReducer = (state = initState, action) => {\\n    switch(action.type) {\\n        case 'LOGIN_ERROR':\\n            console.log('login error');\\n            return {\\n                ...state,\\n                authError: 'Login failed'\\n            }\\n        case 'LOGIN_SUCCESS':\\n            console.log('login success');\\n            return {\\n                ...state,\\n                authError: null\\n            }\\n        case 'SIGNOUT_SUCCESS':\\n            console.log('signout success');\\n            return state;\\n        default:\\n            return state;\\n    }\\n}\\n\\nexport default authReducer\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\")])]),a(\"p\",[s._v(\"あとは\"),a(\"code\",[s._v(\"Log Out\")]),s._v(\"をクリックしたら\"),a(\"code\",[s._v(\"signOut\")]),s._v(\"アクションクリエータをfire！してくれるようにします．\")]),s._v(\" \"),a(\"p\",[s._v(\"まずはアクションクリエータを孕んだ\"),a(\"code\",[s._v(\"dispatch\")]),s._v(\"を\"),a(\"code\",[s._v(\"props\")]),s._v(\"としてコンポネントに渡すために\"),a(\"code\",[s._v(\"mapDispatchToProps\")]),s._v(\"を\"),a(\"code\",[s._v(\"connect\")]),s._v(\"していく．\")]),s._v(\" \"),a(\"p\",[s._v(\"そして\"),a(\"code\",[s._v(\"Log Out\")]),s._v(\"のところを\"),a(\"code\",[s._v(\"a\")]),s._v(\"タグに変更する．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-layout/SignedInLinks.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react'\\nimport { NavLink } from 'react-router-dom'\\nimport { connect } from 'react-redux'\\nimport { signOut } from '../../store/actions/authActions'\\n\\nconst SignedInLinks = (props) => {\\n    return (\\n            <ul className=\\\"right\\\">\\n            <li><NavLink to='/create'>New Project</NavLink></li>\\n            <li><a onClick={props.signOut}>Log Out</a></li>\\n            <li><NavLink to='/' className=\\\"btn btn-floating pink lighten-1\\\">NN</NavLink></li>\\n        </ul>\\n    )\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        signOut: () => dispatch(signOut())\\n    }\\n}\\n\\nexport default connect(null, mapDispatchToProps)(SignedInLinks);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\")])]),a(\"p\",[s._v(\"ログインしてからログアウトして，ブラウザで確認してみよう．\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 16.43.44.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/9d8964f9-ea97-9f7b-4d59-46c5de78b96b.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"次はログイン状況に応じて\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"上の\"),a(\"code\",[s._v(\"SignedInLinks\")]),s._v(\"と\"),a(\"code\",[s._v(\"SignedOutLinks\")]),s._v(\"の表示切り替えを実装したい．\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"authステータスのトラッキング\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#authステータスのトラッキング\"}},[s._v(\"#\")]),s._v(\" Authステータスのトラッキング\")]),s._v(\" \"),a(\"p\",[s._v(\"二つのコンポネントをラップしてる\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"コンポネントをいじるしかないだろう．\\nログインしているとき，\"),a(\"code\",[s._v(\"state.firebase.auth\")]),s._v(\"にはユーザーID示す\"),a(\"code\",[s._v(\"uid\")]),s._v(\"が存在する．ログインしていないと存在しない．\\nこれを利用して片方のコンポネントのみ表示させる．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-layout/Navbar.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react'\\nimport { Link } from 'react-router-dom'\\nimport SignedInLinks from './SignedInLinks'\\nimport SignedOutLinks from './SignedOutLinks'\\nimport { connect } from 'react-redux'\\n\\nconst Navbar = (props) => {\\n    const { auth } = props;\\n    const links = auth.uid ? <SignedInLinks /> : <SignedOutLinks />\\n    return (\\n        <nav className=\\\"nav-wrapper grey darken-3\\\">\\n            <div className=\\\"container\\\">\\n                <Link to='/' className=\\\"brand-logo\\\">MarioPlan</Link>\\n                { links }\\n            </div>\\n        </nav>\\n    )\\n}\\n\\nconst mapStateToProps = (state) => {\\n    return {\\n        auth: state.firebase.auth\\n    }\\n}\\n\\nexport default connect(mapStateToProps)(Navbar);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\")])]),a(\"p\",[s._v(\"ログインしたりログアウトしたりしてブラウザで確認しよう．\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 17.00.12.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/d90cf6ef-962f-5e80-a467-791c4cb62650.png\"}}),s._v(\" \"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 17.00.54.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/32126fc2-22a2-263e-c88c-30d8e4a4fadb.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"次は今のと似たような条件分岐を使って軽微な調整をする．\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"authの準備をまってやれ\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#authの準備をまってやれ\"}},[s._v(\"#\")]),s._v(\" Authの準備をまってやれ\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"Firebase Authentication\")]),s._v(\"を使ったシステムはほぼ完成した．\\nしかし少し問題が生じている．\")]),s._v(\" \"),a(\"p\",[s._v(\"ブラウザでログインした状態でリロードすると，一瞬ではあるが，\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"に\"),a(\"code\",[s._v(\"SignedOutLinks\")]),s._v(\"が表示されてしまっている．\\nこれはよくないUXの例だね．\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"Firebase Authentication\")]),s._v(\"が初期化される前にコンポネントひいてはアプリ全体がレンダリングされてしまうと，ログインできていないステータスで表示される．さっきで言うところの，\"),a(\"code\",[s._v(\"uid\")]),s._v(\"が存在していないからだ．\")]),s._v(\" \"),a(\"p\",[s._v(\"なので初期化が済んでログイン状況がわかるまでは，アプリがDOMにレンダリングされるのを阻止したい．\")]),s._v(\" \"),a(\"p\",[s._v(\"解決はとても簡単なのでサクッとやってしまおう．\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"src/index.js\")]),s._v(\"をいじる．ここがアプリをレンダリングしている場所だ．\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"react-redux-firebase\")]),s._v(\"ストアエンハンサーの引数で\"),a(\"code\",[s._v(\"attachAuthIsReady\")]),s._v(\"を\"),a(\"code\",[s._v(\"true\")]),s._v(\"にする．\\nこれによって\"),a(\"code\",[s._v(\"store\")]),s._v(\"のプロパティで\"),a(\"code\",[s._v(\"firebaseAuthIsReady\")]),s._v(\"というメソッドが呼び出せるようになる．\")]),s._v(\" \"),a(\"p\",[s._v(\"これを呼び出すとfirebaseの初期化をまってくれて，そこに\"),a(\"code\",[s._v(\"then\")]),s._v(\"メソッドを使ってコールバック関数を呼び出し，その中でアプリをDOMにレンダリングする．\")]),s._v(\" \"),a(\"p\",[s._v(\"こうすれば，\"),a(\"code\",[s._v(\"firebase初期化\")]),s._v(\"→\"),a(\"code\",[s._v(\"アプリをDOMにレンダリング\")]),s._v(\"という順番が確定する．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-src/index.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\nimport * as serviceWorker from './serviceWorker';\\nimport { createStore, applyMiddleware, compose } from 'redux';\\nimport rootReducer from './store/reducers/rootReducer';\\nimport { Provider } from 'react-redux';\\nimport thunk from 'redux-thunk';\\nimport { reduxFirestore, getFirestore } from 'redux-firestore';\\nimport { reactReduxFirebase, getFirebase } from 'react-redux-firebase';\\nimport fbConfig from './config/fbConfig';\\n\\nconst store = createStore(rootReducer,\\n    compose(\\n        applyMiddleware(thunk.withExtraArgument({getFirebase, getFirestore})),\\n        reduxFirestore(fbConfig),\\n        reactReduxFirebase(fbConfig, {attachAuthIsReady: true}) \\n    )\\n);\\n\\nstore.firebaseAuthIsReady.then(() => {\\n    ReactDOM.render(\\n        <Provider store={store}><App /></Provider>, document.getElementById('root'));\\n    serviceWorker.unregister();\\n})\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\")])]),a(\"p\",[s._v(\"ブラウザでリロードして修正できたのを確認してみよう．\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"ルートガード\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ルートガード\"}},[s._v(\"#\")]),s._v(\" ルートガード\")]),s._v(\" \"),a(\"p\",[s._v(\"今回のアプリでは，ユーザーがサイトを訪れた時（ログインしてない時）にはプロジェクト一覧とディティールを見せたくないし，新しいプロジェクトも作らせたくない．\\nなのでログインしていないユーザーが\"),a(\"code\",[s._v(\"/\")]),s._v(\"や\"),a(\"code\",[s._v(\"/create\")]),s._v(\"，\"),a(\"code\",[s._v(\"/project/:id\")]),s._v(\"にアクセスしてもログインページ\"),a(\"code\",[s._v(\"/signin\")]),s._v(\"にリダイレクトして欲しい．\\nそれにはルートガードという手法をとる．\")]),s._v(\" \"),a(\"p\",[s._v(\"早速\"),a(\"code\",[s._v(\"Dashboard\")]),s._v(\"からいじって行こう．\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"state.firebase.auth\")]),s._v(\"でログイン状況が分かるんだったよね．こいつをコンポネントで使うために\"),a(\"code\",[s._v(\"mapStateToProps\")]),s._v(\"にて\"),a(\"code\",[s._v(\"props\")]),s._v(\"に渡す．\")]),s._v(\" \"),a(\"p\",[s._v(\"ログインしていないと\"),a(\"code\",[s._v(\"!auth.uid\")]),s._v(\"が\"),a(\"code\",[s._v(\"true\")]),s._v(\"となり，\"),a(\"code\",[s._v(\"react-router-dom\")]),s._v(\"から提供されている\"),a(\"code\",[s._v(\"Redirect\")]),s._v(\"で\"),a(\"code\",[s._v(\"/signin\")]),s._v(\"へリダイレクトする．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-dashboard/Dashboard.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React, { Component } from 'react'\\nimport Notification from './Notification'\\nimport ProjectList from '../projects/ProjectList'\\nimport { connect } from 'react-redux'\\nimport { firestoreConnect } from 'react-redux-firebase'\\nimport { compose } from 'redux'\\nimport { Redirect } from 'react-router-dom'\\n\\nclass Dashboard extends Component {\\n    render() {\\n        const { projects, auth } = this.props;\\n        if (!auth.uid) return <Redirect to='/signin' />\\n\\n        return (\\n            <div className=\\\"dashboard container\\\">\\n                <div className=\\\"row\\\">\\n                    <div className=\\\"col s12 m6\\\">\\n                        <ProjectList projects={projects} />\\n                    </div>\\n                    <div className=\\\"col s12 m5 offset-m1\\\">\\n                        <Notification />\\n                    </div>\\n                </div>\\n            </div>\\n        )\\n    }\\n}\\n\\nconst mapStateToProps = (state) => {\\n    console.log(state);\\n    return {\\n        projects: state.firestore.ordered.projects,\\n        auth: state.firebase.auth\\n    }\\n}\\n\\nexport default compose(\\n    connect(mapStateToProps),\\n    firestoreConnect([\\n        { collection: 'projects' }\\n    ])\\n)(Dashboard);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\")])]),a(\"p\",[s._v(\"これで\"),a(\"code\",[s._v(\"/\")]),s._v(\"用のルートガードができた．次は\"),a(\"code\",[s._v(\"/create\")]),s._v(\"用のルートガードだ．ログインしてないから\"),a(\"code\",[s._v(\"New Project\")]),s._v(\"ボタンは押せないが\"),a(\"code\",[s._v(\"/create\")]),s._v(\"と直接url入力すれば訪問できてしまっている．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-projects/CreateProject.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('import React, { Component } from \\'react\\'\\nimport { connect } from \\'react-redux\\'\\nimport { createProject } from \\'../../store/actions/projectActions\\'\\nimport { Redirect } from \\'react-router-dom\\'\\n\\nclass CreateProject extends Component {\\n    state = {\\n        title: \\'\\',\\n        content: \\'\\'\\n    }\\n    handleChange = (e) => {\\n        this.setState({\\n            [e.target.id]: e.target.value\\n        })\\n    }\\n    handleSubmit = (e) => {\\n        e.preventDefault()\\n        this.props.createProject(this.state)\\n    }\\n    render() {\\n        const { auth } = this.props;\\n        if (!auth.uid) return <Redirect to=\\'/signin\\' />\\n\\n        return (\\n            <div className=\"container\">\\n                <form onSubmit={this.handleSubmit} className=\"white\">\\n                    <h5 className=\"grey-text text-darken-3\">Create new project</h5>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"title\">Title</label>\\n                        <input type=\"text\" id=\"title\" onChange={this.handleChange} />\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"content\">Project Content</label>\\n                        <textarea id=\"content\" className=\"materialize-textarea\" onChange={this.handleChange}></textarea>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <button className=\"btn pink lighten-1 z-depth-0\">Create</button>\\n                    </div>\\n                </form>\\n            </div>\\n        )\\n    }\\n}\\n\\nconst mapStateToProps = (state) => {\\n    return {\\n        auth: state.firebase.auth\\n    }\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        createProject: (project) => dispatch(createProject(project))\\n    }\\n}\\n\\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateProject)\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),a(\"br\")])]),a(\"p\",[s._v(\"同様のことを\"),a(\"code\",[s._v(\"ProjectDetails\")]),s._v(\"でも実装する．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-projects/ProjectDetails.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react'\\nimport { connect } from 'react-redux'\\nimport { firestoreConnect } from 'react-redux-firebase'\\nimport { compose } from 'redux'\\nimport { Redirect } from 'react-router-dom'\\n\\nconst ProjectDetails = (props) => {\\n    const { project, auth } = props;\\n    if (!auth.uid) return <Redirect to='/signin' />\\n    if (project) {\\n        return (\\n            <div className=\\\"container section project-details\\\">\\n                <div className=\\\"card z-depth-0\\\">\\n                    <div className=\\\"card-content\\\">\\n                        <span className=\\\"card-title\\\">{ project.title }</span>\\n                        <p>{ project.content }</p>\\n                    </div>\\n                    <div className=\\\"card-action gret lighten-4 grey-text\\\">\\n                        <div>Posted by {project.authorFirstName} {project.authorLastName}</div>\\n                        <div>2nd, September, 2am</div>\\n                    </div>\\n                </div>\\n            </div>\\n        )\\n    } else {\\n        return (\\n            <div className=\\\"container center\\\">\\n                <p>Loaging project...</p>\\n            </div>\\n        )\\n    }\\n    \\n}\\n\\nconst mapStateToProps = (state, ownProps) => {\\n    const id = ownProps.match.params.id;\\n    const projects = state.firestore.data.projects;\\n    const project = projects ? projects[id] : null\\n    return {\\n        project: project,\\n        auth: state.firebase.auth\\n    }\\n}\\n\\nexport default compose(\\n    connect(mapStateToProps),\\n    firestoreConnect([\\n        { collection: 'projects' }\\n    ])\\n)(ProjectDetails);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),a(\"br\")])]),a(\"p\",[s._v(\"各自ブラウザでルートガードができているか確認して欲しい．\")]),s._v(\" \"),a(\"p\",[s._v(\"あとは逆にログインしているのに\"),a(\"code\",[s._v(\"/signin\")]),s._v(\"や\"),a(\"code\",[s._v(\"/signup\")]),s._v(\"にはアクセスして欲しくないのでそこもルートガードを実装する必要がある．\")]),s._v(\" \"),a(\"p\",[s._v(\"まずは\"),a(\"code\",[s._v(\"SignIn\")]),s._v(\"コンポネントからいじろうか．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-auth/SignIn.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('import React, { Component } from \\'react\\'\\nimport { connect } from \\'react-redux\\'\\nimport { signIn } from \\'../../store/actions/authActions\\'\\nimport { Redirect } from \\'react-router-dom\\'\\n\\nclass SignIn extends Component {\\n    state = {\\n        email: \\'\\',\\n        password: \\'\\'\\n    }\\n    handleChange = (e) => {\\n        this.setState({\\n            [e.target.id]: e.target.value\\n        })\\n    }\\n    handleSubmit = (e) => {\\n        e.preventDefault()\\n        this.props.signIn(this.state)\\n    }\\n    render() {\\n        const { authError, auth } = this.props;\\n        if (auth.uid) return <Redirect to=\\'/\\' />\\n\\n        return (\\n            <div className=\"container\">\\n                <form onSubmit={this.handleSubmit} className=\"white\">\\n                    <h5 className=\"grey-text text-darken-3\">Sign In</h5>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"email\">Email</label>\\n                        <input type=\"email\" id=\"email\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"password\">Password</label>\\n                        <input type=\"password\" id=\"password\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <button className=\"btn pink lighten-1 z-depth-0\">Login</button>\\n                        <div className=\"red-text center\">\\n                            { authError ? <p>{authError}</p> : null }\\n                        </div>\\n                    </div>\\n                </form>\\n            </div>\\n        )\\n    }\\n}\\n\\nconst mapStateToProps = (state) => {\\n    return {\\n        authError: state.auth.authError,\\n        auth: state.firebase.auth\\n    }\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        signIn: (creds) => dispatch(signIn(creds))\\n    }\\n}\\n\\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"58\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"59\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"60\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"61\")]),a(\"br\")])]),a(\"p\",[s._v(\"次は\"),a(\"code\",[s._v(\"SignUp\")]),s._v(\"だ．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-auth/SignUp.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('import React, { Component } from \\'react\\'\\nimport { Redirect } from \\'react-router-dom\\'\\nimport { connect } from \\'react-redux\\'\\n\\nclass SignUp extends Component {\\n    state = {\\n        email: \\'\\',\\n        password: \\'\\',\\n        firstName: \\'\\',\\n        lastName: \\'\\'\\n    }\\n    handleChange = (e) => {\\n        this.setState({\\n            [e.target.id]: e.target.value\\n        })\\n    }\\n    handleSubmit = (e) => {\\n        e.preventDefault()\\n        console.log(this.state)\\n    }\\n    render() {\\n        const { auth } = this.props;\\n        if (auth.uid) return <Redirect to=\\'/\\' />\\n\\n        return (\\n            <div className=\"container\">\\n                <form onSubmit={this.handleSubmit} className=\"white\">\\n                    <h5 className=\"grey-text text-darken-3\">Sign Up</h5>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"email\">Email</label>\\n                        <input type=\"email\" id=\"email\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"password\">Password</label>\\n                        <input type=\"password\" id=\"password\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"firstName\">First Name</label>\\n                        <input type=\"text\" id=\"firstName\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"lastName\">Last Name</label>\\n                        <input type=\"text\" id=\"lastName\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <button className=\"btn pink lighten-1 z-depth-0\">Sign up</button>\\n                    </div>\\n                </form>\\n            </div>\\n        )\\n    }\\n}\\n\\nconst mapStateToProps = (state) => {\\n    return {\\n        auth: state.firebase.auth\\n    }\\n}\\n\\nexport default connect(mapStateToProps)(SignUp);\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"58\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"59\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"60\")]),a(\"br\")])]),a(\"p\",[s._v(\"これで一通りのルートガードの実装が完了した．やったことを振り返ると\"),a(\"code\",[s._v(\"Authentication\")]),s._v(\"のステータスを利用して条件に応じて\"),a(\"code\",[s._v(\"Redirect\")]),s._v(\"させることでコンテンツを保護した．\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"サインアップ機能\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#サインアップ機能\"}},[s._v(\"#\")]),s._v(\" サインアップ機能\")]),s._v(\" \"),a(\"p\",[s._v(\"今はまだ\"),a(\"code\",[s._v(\"SIGN UP\")]),s._v(\"を押しても内部\"),a(\"code\",[s._v(\"state\")]),s._v(\"に保管された入力内容を\"),a(\"code\",[s._v(\"console.log(state)\")]),s._v(\"するだけに留まっている．\\n本当はFirebase Authを使って新しいユーザーを作成したい．\")]),s._v(\" \"),a(\"p\",[s._v(\"どこに実装すればいい？非同期処理タスクを扱うんだからもちろん\"),a(\"code\",[s._v(\"action creator\")]),s._v(\"だよね．\")]),s._v(\" \"),a(\"p\",[s._v(\"なので\"),a(\"code\",[s._v(\"authActions.js\")]),s._v(\"内にサインアップ用のアクションクリエータを作って行こう．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-actions/authActions.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"export const signIn = (credentials) => {\\n    return (dispatch, getState, {getFirebase}) => {\\n        const firebase = getFirebase();\\n\\n        firebase.auth().signInWithEmailAndPassword(\\n            credentials.email,\\n            credentials.password\\n        ).then(() => {\\n            dispatch({ type: 'LOGIN_SUCCESS' });\\n        }).catch((err) => {\\n            dispatch({ type: 'LOGIN_ERROR' });\\n        });\\n    }\\n}\\n\\nexport const signOut = () => {\\n    return (dispatch, getState, {getFirebase}) => {\\n        const firebase = getFirebase();\\n\\n        firebase.auth().signOut().then(() => {\\n            dispatch({ type: 'SIGNOUT_SUCCESS' })\\n        });\\n    }\\n}\\n\\nexport const signUp = (newUser) => {\\n    return (dispatch, getState, {getFirebase, getFirestore}) => {\\n        const firebase = getFirebase();\\n        const firestore = getFirestore();\\n\\n        firebase.auth().createUserWithEmailAndPassword(\\n            newUser.email,\\n            newUser.password\\n        ).then((resp) => {\\n            return firestore.collection('users').doc(resp.user.uid).set({\\n                firstName: newUser.firstName,\\n                lastName: newUser.lastName,\\n                initials: newUser.firstName[0] + newUser.lastName[0]\\n            })\\n        }).then(() => {\\n            dispatch({ type: 'SIGNUP_SUCCESS' })\\n        }).catch(err => {\\n            dispatch({ type: 'SIGNUP_ERROR', err })\\n        })\\n    }\\n}\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\")])]),a(\"p\",[s._v(\"他の\"),a(\"code\",[s._v(\"signIn\")]),s._v(\"と\"),a(\"code\",[s._v(\"signOut\")]),s._v(\"と違い，\"),a(\"code\",[s._v(\"getFirestore\")]),s._v(\"も使うのは理由がある．\\n\"),a(\"code\",[s._v(\"Authentication\")]),s._v(\"ではメールと（自動生成の）IDだけしか情報を持たない．しかし名前などの追加情報も保管したいので\"),a(\"code\",[s._v(\"firestore\")]),s._v(\"で\"),a(\"code\",[s._v(\"Users\")]),s._v(\"コレクションを作成し，そこに個人データを保管する．\\nこの時\"),a(\"code\",[s._v(\"Authentication\")]),s._v(\"で自動生成された\"),a(\"code\",[s._v(\"ID\")]),s._v(\"が\"),a(\"code\",[s._v(\"Users\")]),s._v(\"コレクションに保管されるデータのユニークIDとを一致させることで連携させるためだ．\\n\"),a(\"img\",{attrs:{width:\"1361\",alt:\"スクリーンショット 2019-10-26 14.08.45.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/c9406b3f-9d44-77b0-bb9e-3313624eec4c.png\"}})]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"newUser\")]),s._v(\"にはフォームに入力された情報が，\"),a(\"code\",[s._v(\"resp\")]),s._v(\"には\"),a(\"code\",[s._v(\"createUserWithEmailAndPassword\")]),s._v(\"の返り値が入っている．\\n\"),a(\"code\",[s._v(\"then\")]),s._v(\"メソッドのコールバック関数内で\"),a(\"code\",[s._v(\"users\")]),s._v(\"コレクションにデータを追加している．\"),a(\"code\",[s._v(\"users\")]),s._v(\"コレクションは作成していないが，存在しないコレクション名を指定すると自動で作ってくれるから問題ない．\")]),s._v(\" \"),a(\"p\",[s._v(\"注意として\"),a(\"code\",[s._v(\"add\")]),s._v(\"だと自動でデータに対してユニークなIDがつくが今回はそれを望まない．なぜなら\"),a(\"code\",[s._v(\"Authentication\")]),s._v(\"で自動生成されたIDと一致させたいからだ．\")]),s._v(\" \"),a(\"p\",[s._v(\"今回は\"),a(\"code\",[s._v(\"doc\")]),s._v(\"を使用することで特定のIDを指定できるようにした．そこに\"),a(\"code\",[s._v(\"set\")]),s._v(\"メソッドで追加するデータを指定する．\\nあとはいつも通り成功時とエラー時の\"),a(\"code\",[s._v(\"action\")]),s._v(\"を\"),a(\"code\",[s._v(\"dispatch\")]),s._v(\"している．\")]),s._v(\" \"),a(\"p\",[s._v(\"次にこれらの\"),a(\"code\",[s._v(\"action\")]),s._v(\"を扱う\"),a(\"code\",[s._v(\"reducer\")]),s._v(\"を設定していく．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-reducers/authReducer.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"const initState = {\\n    authError: null\\n}\\nconst authReducer = (state = initState, action) => {\\n    switch(action.type) {\\n        case 'LOGIN_ERROR':\\n            console.log('login error');\\n            return {\\n                ...state,\\n                authError: 'Login failed'\\n            }\\n        case 'LOGIN_SUCCESS':\\n            console.log('login success');\\n            return {\\n                ...state,\\n                authError: null\\n            }\\n        case 'SIGNOUT_SUCCESS':\\n            console.log('signout success');\\n            return state;\\n        case 'SIGNUP_SUCCESS':\\n            console.log('signup success');\\n            return {\\n                ...state,\\n                authError: null\\n            }\\n        case 'SIGNUP_ERROR':\\n            console.log('signup failed');\\n            return {\\n                ...state,\\n                authError: action.err.message\\n            }\\n        default:\\n            return state;\\n    }\\n}\\n\\nexport default authReducer\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\")])]),a(\"p\",[a(\"code\",[s._v(\"action.type.message\")]),s._v(\"には\"),a(\"code\",[s._v(\"無効なメールアドレスだ\")]),s._v(\"とか\"),a(\"code\",[s._v(\"パスワードが短すぎる\")]),s._v(\"とかのエラーメッセージが含まれる．\")]),s._v(\" \"),a(\"p\",[s._v(\"これで呼び出される側の実装は終わった．あとは呼び出す側\"),a(\"code\",[s._v(\"SignUp\")]),s._v(\"コンポネントでの実装のみだ．やっていこう．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-auth/SignUp.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('import React, { Component } from \\'react\\'\\nimport { Redirect } from \\'react-router-dom\\'\\nimport { connect } from \\'react-redux\\'\\nimport { signUp } from \\'../../store/actions/authActions\\'\\n\\nclass SignUp extends Component {\\n    state = {\\n        email: \\'\\',\\n        password: \\'\\',\\n        firstName: \\'\\',\\n        lastName: \\'\\'\\n    }\\n    handleChange = (e) => {\\n        this.setState({\\n            [e.target.id]: e.target.value\\n        })\\n    }\\n    handleSubmit = (e) => {\\n        e.preventDefault();\\n        this.props.signUp(this.state);\\n    }\\n    render() {\\n        const { auth, authError } = this.props;\\n        if (auth.uid) return <Redirect to=\\'/\\' />\\n\\n        return (\\n            <div className=\"container\">\\n                <form onSubmit={this.handleSubmit} className=\"white\">\\n                    <h5 className=\"grey-text text-darken-3\">Sign Up</h5>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"email\">Email</label>\\n                        <input type=\"email\" id=\"email\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"password\">Password</label>\\n                        <input type=\"password\" id=\"password\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"firstName\">First Name</label>\\n                        <input type=\"text\" id=\"firstName\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"lastName\">Last Name</label>\\n                        <input type=\"text\" id=\"lastName\" onChange={this.handleChange}/>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <button className=\"btn pink lighten-1 z-depth-0\">Sign up</button>\\n                        <div className=\"red-text center\">\\n                            { authError ? <p>{authError}</p> : null }\\n                        </div>\\n                    </div>\\n                </form>\\n            </div>\\n        )\\n    }\\n}\\n\\nconst mapStateToProps = (state) => {\\n    return {\\n        auth: state.firebase.auth,\\n        authError: state.auth.authError\\n    }\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        signUp: (newUser) => dispatch(signUp(newUser))\\n    }\\n}\\n\\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"58\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"59\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"60\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"61\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"62\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"63\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"64\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"65\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"66\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"67\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"68\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"69\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"70\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"71\")]),a(\"br\")])]),a(\"p\",[s._v(\"それではブラウザでサインアップしてみよう．\\npassword: 'test1234'\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 22.29.55.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/9ecc84ad-b850-b19f-082e-c49428db914a.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"サインアップが無事完了してルートガードによってダッシュボード画面にきたらOK．\")]),s._v(\" \"),a(\"p\",[s._v(\"あとはfirebaseプロジェクトにユーザーが追加されているかも確認しよう．\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 22.33.10.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/5e510fc2-a8e7-c14a-1267-5f0bacebd9b2.png\"}}),s._v(\" \"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 22.33.43.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/09e8bcb1-fa15-0947-3caf-eccb39fe210f.png\"}}),s._v(\" \"),a(\"code\",[s._v(\"Authentication\")]),s._v(\"の\"),a(\"code\",[s._v(\"ユーザーUID\")]),s._v(\"と\"),a(\"code\",[s._v(\"Firestore\")]),s._v(\"のドキュメントの\"),a(\"code\",[s._v(\"id\")]),s._v(\"が一致しているのが分かるだろう．\")]),s._v(\" \"),a(\"p\",[s._v(\"あと\"),a(\"code\",[s._v(\"SignIn\")]),s._v(\"と同様にエラーの時に\"),a(\"code\",[s._v(\"authError\")]),s._v(\"を使ってフォーム下部に赤字でエラーメッセージ表示するようにもしたので，わざと短いパスワードにしたりして動作確認してね．\")]),s._v(\" \"),a(\"p\",[s._v(\"#ユーザープロフィールデータ\\n次は\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"にログイン中に出てくるイニシャルが描かれたピンクの円をログインユーザーに合わせて設定したい．\")]),s._v(\" \"),a(\"p\",[s._v(\"今のところ\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"も\"),a(\"code\",[s._v(\"SignedInLinks\")]),s._v(\"もユーザーのメールアドレスやIDの情報は持っているが，名前の情報は持っていない．\")]),s._v(\" \"),a(\"p\",[s._v(\"↓\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"の\"),a(\"code\",[s._v(\"mapStateToProps\")]),s._v(\"内に\"),a(\"code\",[s._v(\"console.log(state)\")]),s._v(\"を設置してみた画像\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 23.09.30.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/e947662c-4244-f7b1-3433-56a97ffd6781.png\"}}),s._v(\"\\nじゃぁ名前の情報はどこにあるかと言ったら\"),a(\"code\",[s._v(\"Firestore\")]),s._v(\"の\"),a(\"code\",[s._v(\"users\")]),s._v(\"コレクションだった．\\n\"),a(\"code\",[s._v(\"firebase.profile\")]),s._v(\"というプロパティがある．画像での状態はプロフィール情報を持っていないことを示す．ここに名前情報などを持ったオブジェクトをぶち込みたい．\")]),s._v(\" \"),a(\"p\",[s._v(\"実は方法はすごい簡単で，\"),a(\"code\",[s._v(\"src/index.js\")]),s._v(\"の\"),a(\"code\",[s._v(\"react-redux-firebase\")]),s._v(\"に追加のプロパティを設定してあげればいい．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-src/index.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\nimport * as serviceWorker from './serviceWorker';\\nimport { createStore, applyMiddleware, compose } from 'redux';\\nimport rootReducer from './store/reducers/rootReducer';\\nimport { Provider } from 'react-redux';\\nimport thunk from 'redux-thunk';\\nimport { reduxFirestore, getFirestore } from 'redux-firestore';\\nimport { reactReduxFirebase, getFirebase } from 'react-redux-firebase';\\nimport fbConfig from './config/fbConfig';\\n\\nconst store = createStore(rootReducer,\\n    compose(\\n        applyMiddleware(thunk.withExtraArgument({getFirebase, getFirestore})),\\n        reduxFirestore(fbConfig),\\n        reactReduxFirebase(fbConfig, {useFirestoreForProfile: true, userProfile: 'users', attachAuthIsReady: true}) \\n    )\\n);\\n\\nstore.firebaseAuthIsReady.then(() => {\\n    ReactDOM.render(\\n        <Provider store={store}><App /></Provider>, document.getElementById('root'));\\n    serviceWorker.unregister();\\n})\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\")])]),a(\"p\",[s._v(\"こいつらは\"),a(\"code\",[s._v(\"react-redux-firebase\")]),s._v(\"と\"),a(\"code\",[s._v(\"redux-firestore\")]),s._v(\"経由でユーザー情報を取得するための設定だ．\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"useFirestoreForProfile\")]),s._v(\"は\"),a(\"code\",[s._v(\"firebaseReducer\")]),s._v(\"に\"),a(\"code\",[s._v(\"firestore\")]),s._v(\"データベースと\"),a(\"code\",[s._v(\"profile\")]),s._v(\"オブジェクトを同期を可能にさせる設定だ．ただこのままでは\"),a(\"code\",[s._v(\"firebaseReducer\")]),s._v(\"はどのコレクションと同期すればいいのか知らない．\\nなので，\"),a(\"code\",[s._v(\"userProfile\")]),s._v(\"で\"),a(\"code\",[s._v(\"users\")]),s._v(\"とコレクション名を指定してあげた．\")]),s._v(\" \"),a(\"p\",[s._v(\"この状態でブラウザコンソールを確認してみよう．（他コンポネントのconsole.logとか残ってたら適宜削除してね）\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-26 23.34.32.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/8f8129b0-9fe8-e144-e80b-c53d0813c1ed.png\"}}),s._v(\"\\n見事\"),a(\"code\",[s._v(\"firebase.profile\")]),s._v(\"にログインしているユーザーの情報がぶち込まれた．\\nこれをもとに\"),a(\"code\",[s._v(\"Navbar\")]),s._v(\"のピンク円を編集していく．\")]),s._v(\" \"),a(\"p\",[s._v(\"いつも通り\"),a(\"code\",[s._v(\"mapStateToProps\")]),s._v(\"で\"),a(\"code\",[s._v(\"profile\")]),s._v(\"を\"),a(\"code\",[s._v(\"props\")]),s._v(\"に渡し，さらにコンポネント内で\"),a(\"code\",[s._v(\"SignedInLinks\")]),s._v(\"に\"),a(\"code\",[s._v(\"props\")]),s._v(\"として渡している．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-layout/Navbar.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react'\\nimport { Link } from 'react-router-dom'\\nimport SignedInLinks from './SignedInLinks'\\nimport SignedOutLinks from './SignedOutLinks'\\nimport { connect } from 'react-redux'\\n\\nconst Navbar = (props) => {\\n    const { auth, profile } = props;\\n    const links = auth.uid ? <SignedInLinks profile={profile} /> : <SignedOutLinks />\\n    return (\\n        <nav className=\\\"nav-wrapper grey darken-3\\\">\\n            <div className=\\\"container\\\">\\n                <Link to='/' className=\\\"brand-logo\\\">MarioPlan</Link>\\n                { links }\\n            </div>\\n        </nav>\\n    )\\n}\\n\\nconst mapStateToProps = (state) => {\\n    console.log(state);\\n    return {\\n        auth: state.firebase.auth,\\n        profile: state.firebase.profile\\n    }\\n}\\n\\nexport default connect(mapStateToProps)(Navbar);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\")])]),a(\"p\",[s._v(\"最後に\"),a(\"code\",[s._v(\"SignedInLinks\")]),s._v(\"をいじって終わりだ．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-layout/SignedInLinks.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"import React from 'react'\\nimport { NavLink } from 'react-router-dom'\\nimport { connect } from 'react-redux'\\nimport { signOut } from '../../store/actions/authActions'\\n\\nconst SignedInLinks = (props) => {\\n    return (\\n            <ul className=\\\"right\\\">\\n            <li><NavLink to='/create'>New Project</NavLink></li>\\n            <li><a onClick={props.signOut}>Log Out</a></li>\\n            <li><NavLink to='/' className=\\\"btn btn-floating pink lighten-1\\\">\\n                {props.profile.initials}\\n            </NavLink></li>\\n        </ul>\\n    )\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        signOut: () => dispatch(signOut())\\n    }\\n}\\n\\nexport default connect(null, mapDispatchToProps)(SignedInLinks);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"プロジェクト作成の細部\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#プロジェクト作成の細部\"}},[s._v(\"#\")]),s._v(\" プロジェクト作成の細部\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"CreateProject\")]),s._v(\"でプロジェクトを作成すると\"),a(\"code\",[s._v(\"createproject\")]),s._v(\"アクションクリエータが実行される．その内部ではfirestoreの\"),a(\"code\",[s._v(\"projects\")]),s._v(\"コレクションにプロジェクトを追加している．\")]),s._v(\" \"),a(\"p\",[s._v(\"しかし，\"),a(\"code\",[s._v(\"author~~\")]),s._v(\"の3つのプロパティは前にハードコーディングしたものをまだ使っている．これをログインしているユーザーの情報に対応させたいので\"),a(\"code\",[s._v(\"projectActions.js\")]),s._v(\"を修正していく．\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"getState\")]),s._v(\"を使って\"),a(\"code\",[s._v(\"state\")]),s._v(\"のデータにアクセスする．\"),a(\"code\",[s._v(\"getState()\")]),s._v(\"はstate全体を返す．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-actions/projectActions.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"export const createProject = (project) => {\\n    return (dispatch, getState, { getFirebase, getFirestore }) => {\\n        // make async call to database\\n        const firestore = getFirestore();　\\n        const profile = getState().firebase.profile;\\n        const authorId = getState().firebase.auth.uid;\\n        firestore.collection('projects').add({\\n            ...project,\\n            authorFirstName: profile.firstName,\\n            authorLastName: profile.lastName,\\n            authorId: authorId,\\n            createdAt: new Date()\\n        }).then(() => {\\n            dispatch({ type: 'CREATE_PROJECT', project})\\n        }).catch((err) => {\\n            dispatch({ type: 'CREATE_PROJECT_ERROR', err })\\n        })\\n        \\n    }\\n};\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\")])]),a(\"p\",[s._v(\"これで適切な作成されるプロジェクトに適切なユーザー情報が記述されるはず．プロジェクトを作ってみましょう．\\n\"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-27 0.06.17.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/01cc7732-ee36-6dfd-7ebb-f925d6351a78.png\"}}),s._v(\" \"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-27 0.07.56.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/034ff417-0fb7-6c65-3d14-648d85fd879b.png\"}}),s._v(\" \"),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-27 0.09.42.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/d201a0cf-7b7f-931c-f10a-f2f1dda78d85.png\"}}),s._v(\"\\nダッシュボードにもちゃんと追加されたのを確認したのも束の間，問題に気づいただろうか．\\n\"),a(\"code\",[s._v(\"Posted by ~~\")]),s._v(\"のところもハードコーディングだったので適切な表示ができていない．（ちなみに\"),a(\"code\",[s._v(\"ProjectDetail\")]),s._v(\"の方は前に修正したのでちゃんと適切な名前が表示されていると思う）\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"ProjectSummary\")]),s._v(\"にて修正していこう．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-projects/ProjectSummary.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('import React from \\'react\\'\\n\\nconst ProjectSummary = ({project}) => {\\n    return (\\n        <div className=\"card z-depth-0 project-summary\">\\n            <div className=\"card-content grey-text text-darken-3\">\\n                <span className=\"card-title\">{project.title}</span>\\n                <p>Posted by the {project.authorFirstName} {project.authorLastName}</p>\\n                <p className=\"grey-text\">3rd September</p>\\n            </div>\\n        </div>\\n    )\\n}\\n\\nexport default ProjectSummary;\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\")])]),a(\"img\",{attrs:{width:\"1680\",alt:\"スクリーンショット 2019-10-27 0.17.41.png\",src:\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/331294/2193d2e1-8595-5d1f-1207-68dd0fcd40a1.png\"}}),s._v(\" \"),a(\"p\",[s._v(\"次はプロジェクトを作成したらダッシュボード画面にリダイレクトするようにしよう．\")]),s._v(\" \"),a(\"p\",[a(\"code\",[s._v(\"CreateProject\")]),s._v(\"をいじる．\\n\"),a(\"code\",[s._v(\"App.js\")]),s._v(\"で，\"),a(\"code\",[s._v(\"react-router-dom\")]),s._v(\"の\"),a(\"code\",[s._v(\"Rote\")]),s._v(\"タグを使ってルート管理をしているわけだが，そのルーティングの対象のコンポネントは内部で\"),a(\"code\",[s._v(\"props\")]),s._v(\"に\"),a(\"code\",[s._v(\"react-router-dom\")]),s._v(\"の機能が入っていてその1つである\"),a(\"code\",[s._v(\"this.props.history.push()\")]),s._v(\"が使える．\")]),s._v(\" \"),a(\"p\",[s._v(\"これにより画面の遷移が可能になる．\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-projects/CreateProject.js line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('import React, { Component } from \\'react\\'\\nimport { connect } from \\'react-redux\\'\\nimport { createProject } from \\'../../store/actions/projectActions\\'\\nimport { Redirect } from \\'react-router-dom\\'\\n\\nclass CreateProject extends Component {\\n    state = {\\n        title: \\'\\',\\n        content: \\'\\'\\n    }\\n    handleChange = (e) => {\\n        this.setState({\\n            [e.target.id]: e.target.value\\n        })\\n    }\\n    handleSubmit = (e) => {\\n        e.preventDefault()\\n        this.props.createProject(this.state)\\n        this.props.history.push(\\'/\\')\\n    }\\n    render() {\\n        const { auth } = this.props;\\n        if (!auth.uid) return <Redirect to=\\'/signin\\' />\\n\\n        return (\\n            <div className=\"container\">\\n                <form onSubmit={this.handleSubmit} className=\"white\">\\n                    <h5 className=\"grey-text text-darken-3\">Create new project</h5>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"title\">Title</label>\\n                        <input type=\"text\" id=\"title\" onChange={this.handleChange} />\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <label htmlFor=\"content\">Project Content</label>\\n                        <textarea id=\"content\" className=\"materialize-textarea\" onChange={this.handleChange}></textarea>\\n                    </div>\\n                    <div className=\"input-field\">\\n                        <button className=\"btn pink lighten-1 z-depth-0\">Create</button>\\n                    </div>\\n                </form>\\n            </div>\\n        )\\n    }\\n}\\n\\nconst mapStateToProps = (state) => {\\n    return {\\n        auth: state.firebase.auth\\n    }\\n}\\n\\nconst mapDispatchToProps = (dispatch) => {\\n    return {\\n        createProject: (project) => dispatch(createProject(project))\\n    }\\n}\\n\\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateProject)\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"58\")]),a(\"br\")])]),a(\"p\",[s._v(\"適当にプロジェクトを作ってみてダッシュボード画面に遷移するかどうかと，ダッシュボードに今作ったプロジェクトは表示されているか確認しよう．\")]),s._v(\" \"),a(\"p\",[s._v(\"今回はここまで．\")]),s._v(\" \"),a(\"p\",[s._v(\"次回からは細かい調整と，いよいよ\"),a(\"code\",[s._v(\"Cloud Function\")]),s._v(\"に触れていく．\"),a(\"code\",[s._v(\"そしてNotifications\")]),s._v(\"も実装して完成まで持っていく．\")])])}),[],!1,null,null,null);n.default=t.exports}}]);","extractedComments":[]}